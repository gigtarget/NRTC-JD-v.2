<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Warehouse Article Locator</title>

  <!-- Google Analytics (unchanged) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KNYST1M2D7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-KNYST1M2D7');
  </script>

  <link rel="stylesheet" href="styles.css" />

  <!-- Theme vars + pulse animations -->
  <style>
    :root{
      --bg:#f4f4f4; --text:#111; --muted:#333; --card:#fff; --border:#ccc;
      --found-bg:#e8f5e9; --found-left:#4caf50; --warn-bg:#fff3e0; --warn-left:#ff9800;
      --map-line:red; --hi-fill:yellow; --hi-stroke:black;
      --btn-bg:#fff; --btn-fg:#111; --btn-border:#ccc;
    }
    body.dark{
      --bg:#0b1220; --text:#e8ecf2; --muted:#d5d8dd; --card:rgba(255,255,255,.06); --border:rgba(255,255,255,.15);
      --found-bg:rgba(16,185,129,.15); --found-left:#10b981; --warn-bg:rgba(245,158,11,.12); --warn-left:#f59e0b;
      --map-line:rgba(56,189,248,.7); --hi-fill:rgba(110,231,183,.95); --hi-stroke:#fff;
      --btn-bg:rgba(255,255,255,.06); --btn-fg:#e8ecf2; --btn-border:rgba(255,255,255,.18);
    }

    .controls { display:flex; align-items:center; justify-content:center; gap:10px; flex-wrap:wrap; }
    .toolbar { display:inline-flex; gap:8px; align-items:center; }
    .btn {
      display:inline-flex; align-items:center; gap:6px; padding:8px 12px; font-size:14px; border-radius:10px;
      background:var(--btn-bg); color:var(--btn-fg); border:1px solid var(--btn-border); cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 8px 22px rgba(0,0,0,.12); }

    /* Pulses */
    @keyframes pulseRingKf{from{r:2;opacity:.9;stroke-width:2}to{r:18;opacity:0;stroke-width:0}}
    @keyframes pulseErrKf{from{r:0;opacity:.35}to{r:180;opacity:0}}
    .pulse-ring{fill:none;stroke:rgba(16,185,129,.9);animation:pulseRingKf 1.2s ease-out 1;pointer-events:none}
    body.dark .highlight { filter: drop-shadow(0 0 6px rgba(16,185,129,.85)) drop-shadow(0 0 12px rgba(16,185,129,.55)); }

    /* Layout tweaks (keep original sizing) */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
      background: var(--bg);
      color: var(--text);
    }
    .header { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 10px; }
    .header img { width: 70px; height: auto; border-radius: 8px; }
    .header-title { font-size: 24px; font-weight: bold; color: var(--muted); }

    .input-wrapper { position: relative; display: inline-block; }
    input[type="text"] {
      padding: 10px 38px 10px 12px; font-size: 16px; width: 80%; max-width: 300px; /* smaller bar (original) */
      border-radius: 10px; border: 1px solid var(--border); background: var(--card); color: var(--text);
    }
    #clearBtn {
      position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
      cursor: pointer; color: #c26c6c; font-size: 20px; display: none;
    }

    #result {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    .map-wrapper {
      overflow: auto;
      padding: 10px;
      margin-top: 16px;
      display: flex;
      justify-content: center;
    }
    svg {
      background: var(--card); border: 1px solid var(--border); padding: 10px; border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); max-width: 530px; width: 100%; height: auto; /* original ratio */
    }
    .section { fill: white; stroke: var(--map-line); stroke-width: 0.6; } /* outlines as original */
    .highlight { fill: var(--hi-fill) !important; stroke: var(--hi-stroke); stroke-width: 1.5; }
    .aisle-label { font-size: 11px; font-weight: bold; fill: var(--muted); }
    .hooping-block { fill: #2196f3; stroke: #2196f3; stroke-width: 1; }
    .hooping-text { fill: #fff; font-size: 11px; font-weight: bold; }

    .hint { font-size: 12px; color: var(--muted); margin-top: 6px; }

    /* Feedback section (unchanged) */
    .feedback-section { margin-top: 30px; text-align: center; }
    .feedback-section textarea {
      width: 70%; max-width: 300px; height: 60px; padding: 8px; font-size: 14px;
      border: 1px solid var(--border); border-radius: 6px; resize: none; background: var(--card); color: var(--text);
    }
    .feedback-section button {
      margin-top: 10px; padding: 10px 20px; background-color: #2e7d32; color: white;
      border: none; border-radius: 6px; font-size: 16px; cursor: pointer;
    }
    .feedback-section button:hover { background-color: #27632a; }
    #thankYouMessage { margin-top: 15px; font-size: 16px; color: #2e7d32; font-weight: bold; }
  </style>
</head>
<body>

  <div class="header">
    <img src="your-logo.png" alt="Logo" />
    <div class="header-title">Warehouse<br>Article Locator</div>
  </div>

  <div class="controls">
    <div class="input-wrapper">
      <input id="searchBox" type="text" placeholder="e.g. LCQ, ANC, AGDT" list="itemSuggestions" />
      <datalist id="itemSuggestions"></datalist>
      <span id="clearBtn">‚ùå</span>
    </div>
    <!-- Theme toggle outside the input wrapper (no overlap) -->
    <div class="toolbar">
      <button id="themeToggle" class="btn" title="Toggle theme">üåì Theme</button>
    </div>
  </div>

  <div class="hint">Type one or more item codes (comma/space separated). Matches will highlight on the map.</div>

  <div id="result"></div>

  <div class="map-wrapper">
    <svg id="aisles" preserveAspectRatio="xMinYMin meet"></svg>
  </div>

  <!-- Feedback Form Section (unchanged) -->
  <div class="feedback-section">
    <h3>üì¢ Suggest a Change / Request New Stock</h3>
    <form id="feedbackForm" action="https://formsubmit.co/jatindhiman1991@hotmail.com" method="POST">
      <textarea name="message" placeholder="Building from scratch! Tell us what‚Äôs broken or brilliant ‚Äî let‚Äôs make it awesome! üí™" required></textarea><br>
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_next" value="https://gigtarget.github.io/NRTC-JD-v.2/">
      <button type="submit">Submit Feedback</button>
    </form>
    <p id="thankYouMessage" style="display:none;">‚úÖ Thank you! Your feedback has been submitted.</p>
  </div>

  <!-- version query added to bust caches -->
    <script src="script.js?v=5"></script>
  <script>
    // Theme bootstrap: restore persisted theme
    (function(){
      const saved = localStorage.getItem('wal-theme') || 'light';
      document.body.classList.toggle('dark', saved === 'dark');
    })();
  </script>
</body>
</html>
